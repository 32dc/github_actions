name: 3 environments test workflow

on:
  workflow_dispatch:

jobs:
  dev-job:
    runs-on: ubuntu-latest
    environment: dev
    steps:
      - uses: actions/checkout@v2

      - id: print_pre
        name: Print pre GITHUB ENV value
        run: echo $GITHUB_ENV
      
      - id: set-env
        name: Set environment variable
        run: echo "ENV_NAME=dev" >> $GITHUB_ENV

      - id: print_post
        name: Print post GITHUB ENV value
        run: echo $GITHUB_ENV

      - id: dev-stage
        name: Run a script in dev env
        run: |
          echo "Running in ${{ env.ENV_NAME }} environment"
  
